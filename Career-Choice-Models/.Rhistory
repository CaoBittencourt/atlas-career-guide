, title = 'Similarity Metrics Comparison - No Imputation'
) +
scale_x_continuous(limits = c(-1,1)) +
ggthemes::theme_hc() -> plt_hist
# HISTOGRAMS (WITH IMPUTATION) --------------------------------------------------------
df_KNN.output.sub.long %>%
mutate(
Similarity2 = Similarity
, Similarity2 = fct_reorder(
Similarity2, Value
, .fun = max, .desc = T
)
, Similarity = fct_reorder(
Similarity, Value
, .fun = max, .desc = T
)
) -> tmp
tmp %>%
ggplot(aes(
x = Value
)) +
geom_histogram(
data = tmp %>%
select(-Similarity)
, aes(group = Similarity2)
, binwidth = .1
, fill = 'grey'
, alpha = 0.5
) +
geom_histogram(
aes(fill = Similarity)
, binwidth = .1
, fill = viridis::plasma(1)
) +
facet_wrap(
facets = vars(Similarity)
, nrow = 3) +
labs(
x = 'Similarity (%)'
, y = 'Count'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
scale_x_continuous(limits = c(-1,1)) +
ggthemes::theme_hc() -> plt_hist.sub
# HEATMAPS (NO IMPUTATION) ------------------------------------------------
df_KNN.output.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Value
, .fun = max
, .desc = F
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = max
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - No Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
) -> plt_heatmap
# HEATMAPS (WITH IMPUTATION) ------------------------------------------------
df_KNN.output.sub.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Value
, .fun = max
, .desc = F
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = max
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
) -> plt_heatmap.sub
# HEATMAPS (SIDE BY SIDE) -----------------------------------------------
plt_heatmaps <- plt_heatmap + plt_heatmap.sub
# LINE CHARTS (NO IMPUTATION) --------------------------------------------------------
df_KNN.output.long %>%
mutate(
Similarity2 = Similarity
, Similarity2 = fct_reorder(
Similarity2, Value
, .fun = max, .desc = T
)
, Similarity = fct_reorder(
Similarity, Value
, .fun = max, .desc = T
)
) %>%
group_by(Similarity) %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Value
, .fun = max
, .desc = F
)
) %>%
ungroup() -> tmp
tmp %>%
ggplot(aes(
x = Occupation
, y = Value
, group = 1
)) +
geom_line(
data = tmp %>%
select(-Similarity)
, aes(group = Similarity2)
, color = 'grey'
, alpha = 0.5
) +
geom_hline(
yintercept = 0
, color = '#001219'
) +
geom_line(
aes(color = Similarity)
, color = '#fb5607'
, size = 1.22
) +
facet_wrap(
facets = vars(Similarity)
, nrow = 3) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - No Imputation'
) +
scale_y_continuous(limits = c(-1,1)) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
) -> plt_line
# LINE CHARTS (WITH IMPUTATION) --------------------------------------------------------
df_KNN.output.sub.long %>%
mutate(
Similarity2 = Similarity
, Similarity2 = fct_reorder(
Similarity2, Value
, .fun = max, .desc = T
)
, Similarity = fct_reorder(
Similarity, Value
, .fun = max, .desc = T
)
) %>%
group_by(Similarity) %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Value
, .fun = max
, .desc = F
)
) %>%
ungroup() -> tmp
tmp %>%
ggplot(aes(
x = Occupation
, y = Value
, group = 1
)) +
geom_line(
data = tmp %>%
select(-Similarity)
, aes(group = Similarity2)
, color = 'grey'
, alpha = 0.5
) +
geom_hline(
yintercept = 0
, color = '#001219'
) +
geom_line(
aes(color = Similarity)
, color = viridis::plasma(1)
, size = 1.22
) +
facet_wrap(
facets = vars(Similarity)
, nrow = 3) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
scale_y_continuous(limits = c(-1,1)) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
) -> plt_line.sub
# LINE CHARTS (SIDE BY SIDE) -----------------------------------------------
plt_lines <- plt_line + plt_line.sub
plt_heatmap
plt_heatmap.sub
# HEATMAPS (NO IMPUTATION) ------------------------------------------------
df_KNN.output.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Value
, .fun = max
, .desc = F
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
# , .fun = max
, .fun = sum
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - No Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
) -> plt_heatmap
plt_heatmap
df_KNN.output.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = min
, .desc = F
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = sum
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - No Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = max
, .desc = T
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = sum
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - No Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output.sub.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = max
, .desc = T
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = max
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output.sub.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = max
, .desc = T
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = sum
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output.sub.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = max
, .desc = T
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = min
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output.sub.long %>%
mutate(
Occupation = fct_reorder(
.f = Occupation
, .x = Euclidean_Distance
, .fun = max
, .desc = T
)
, Similarity = fct_reorder(
.f = Similarity
, .x = Value
, .fun = sum
, .desc = F
)
) %>%
ggplot(aes(
x = Occupation
, y = Similarity
, fill = Value
)) +
geom_tile() +
ggthemes::scale_fill_gradient2_tableau(
palette = 'Red-Blue-White Diverging'
, limits = c(-1,1)
) +
labs(
x = 'Similarity Ranking'
, y = 'Similarity Metric'
, fill = 'Similarity (%)'
, title = 'Similarity Metrics Comparison - With Overqualification Imputation'
) +
ggthemes::theme_hc() +
theme(
axis.text.x = element_blank()
, axis.ticks.x = element_blank()
)
df_KNN.output %>%
# mutate(
#   ID = row_number()
#   , ID = factor(ID)
# ) %>%
pivot_longer(
cols = starts_with('Similarity.')
, names_to = 'Similarity'
, values_to = 'Value'
) %>%
group_by(Similarity) %>%
mutate(
ID = row_number()
, ID = factor(ID)
) %>%view
