)) %>%
pull(item)
)) %>%
pivot_longer(
cols = -1
, names_to = 'item'
, values_to = 'item.score'
) %>%
group_by(occupation) %>%
reframe(
iq =
fun_iq(
dbl_scores = item.score
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
) %>%
full_join(
df_occupations %>%
select(
occupation
, employment2
)
) %>%
ggplot(aes(
x = iq
, weight = employment2
)) +
geom_density()
df_input %>%
# df_occupations %>%
select(
occupation
, any_of(df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
))
df_input %>%
# df_occupations %>%
select(
occupation
, any_of(df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)) %>%
pivot_longer(
cols = -1
, names_to = 'item'
, values_to = 'item.score'
) %>%
group_by(occupation) %>%
reframe(
iq =
fun_iq(
dbl_scores = item.score
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
) %>%
# full_join(
#   df_occupations %>%
#     select(
#       occupation
#       , employment2
#       )
# ) %>%
# ggplot(aes(
#   x = iq
#   , weight = employment2
# )) +
# geom_density()
arrange(desc(iq)) %>%
slice(1:100,(n()-1):n()) %>%
print(n = nrow(.))
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
c(
100
,67
,83
,67
,83
,83
,67
,83
,67
,83
)
fun_iq(
dbl_scores = c(100, 67, 83, 67, 83, 83, 67, 83, 67, 83)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
fun_iq(
dbl_scores = c(83, 67, 83, 67, 83, 83, 67, 83, 67, 83)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
fun_iq(
dbl_scores = c(83, 67, 83, 67, 83, 67, 67, 83, 67, 83)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
fun_iq(
dbl_scores = c(83, 67, 83, 67, 83, 67, 67, 83, 50, 83)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
fun_iq(
dbl_scores = c(83, 67, 83, 67, 83, 67, 67, 83, 50, 67)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
fun_iq(
dbl_scores = c(83, 67, 83, 67, 83, 67, 67, 83, 50, 67)
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 10
)
df_occupations %>%
select(
occupation
, any_of(df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)) %>%
pivot_longer(
cols = -1
, names_to = 'item'
, values_to = 'item.score'
) %>%
group_by(occupation) %>%
reframe(
iq =
fun_iq(
dbl_scores = item.score
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
) %>%
# full_join(
#   df_occupations %>%
#     select(
#       occupation
#       , employment2
#       )
# ) %>%
# ggplot(aes(
#   x = iq
#   , weight = employment2
# )) +
# geom_density()
arrange(desc(iq)) %>%
slice(1:100,(n()-1):n()) %>%
print(n = nrow(.))
df_occupations %>%
select(
occupation
, any_of(df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)) %>%
pivot_longer(
cols = -1
, names_to = 'item'
, values_to = 'item.score'
) %>%
group_by(occupation) %>%
reframe(
iq =
fun_iq(
dbl_scores = item.score
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 10
)
) %>%
# full_join(
#   df_occupations %>%
#     select(
#       occupation
#       , employment2
#       )
# ) %>%
# ggplot(aes(
#   x = iq
#   , weight = employment2
# )) +
# geom_density()
arrange(desc(iq)) %>%
slice(1:100,(n()-1):n()) %>%
print(n = nrow(.))
df_occupations %>%
select(
occupation
, any_of(df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)) %>%
pivot_longer(
cols = -1
, names_to = 'item'
, values_to = 'item.score'
) %>%
group_by(occupation) %>%
reframe(
iq =
fun_iq(
dbl_scores = item.score
, dbl_scale_ub = 100
, dbl_scale_lb = 0
, int_interval = 7
, dbl_proxy_mean = 36.1
, dbl_proxy_sd = 10.6
, dbl_iq_mean = 100
, dbl_iq_sd = 15
)
) %>%
# full_join(
#   df_occupations %>%
#     select(
#       occupation
#       , employment2
#       )
# ) %>%
# ggplot(aes(
#   x = iq
#   , weight = employment2
# )) +
# geom_density()
arrange(desc(iq)) %>%
slice(1:100,(n()-1):n()) %>%
print(n = nrow(.))
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
)
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
)
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
, names_to = 'item'
, values_to = 'item.score'
)
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
, names_to = 'item'
, values_to = 'item.score'
) %>%
mutate(
iq.mean =
weighted.mean(
item.score
, employment2
)
)
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
, names_to = 'item'
, values_to = 'item.score'
) %>%
mutate(
iq.mean =
weighted.mean(
item.score
, employment2
)
) %>%
group_by(occupation) %>%
reframe(
iq =
100 *
mean(item.score) /
first(iq.mean)
)
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
, names_to = 'item'
, values_to = 'item.score'
) %>%
mutate(
iq.mean =
weighted.mean(
item.score
, employment2
)
) %>%
group_by(occupation) %>%
reframe(
iq =
100 *
mean(item.score) /
first(iq.mean)
) %<%
arrange(desc(iq))
df_occupations %>%
select(
occupation
, employment2
, any_of(
df_factors %>%
filter(
str_detect(
str_to_lower(
factor.name
), 'intelligence'
)) %>%
pull(item)
)
) %>%
pivot_longer(
cols = ends_with('.l')
, names_to = 'item'
, values_to = 'item.score'
) %>%
mutate(
iq.mean =
weighted.mean(
item.score
, employment2
)
) %>%
group_by(occupation) %>%
reframe(
iq =
100 *
mean(item.score) /
first(iq.mean)
) %>%
arrange(desc(iq))
