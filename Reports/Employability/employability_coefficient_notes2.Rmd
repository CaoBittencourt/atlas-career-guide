---
title: "Employability"
subtitle: "Defining Employability Coefficients for Careers and Professional Attributes" 
author: "Atlas Research Team"
date: "`r Sys.Date()`"
geometry: a4paper, margin = 1in
output:
  pdf_document:
  # ipsum_pdf:
    # toc: TRUE
    # number_sections: TRUE
    # toc_depth: 4
    # extra_dependencies: ["float"]
    # extra_dependencies: ["flafter"]

header-includes:
   - \usepackage{titlesec}
   - \usepackage{floatrow}
   - \usepackage{physics}
   - \usepackage{mathtools}
   - \floatsetup[figure]{capposition=top}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(fig.pos = "H", out.extra = "")
source('C:/Users/Cao/Documents/Github/Atlas-Research/Functions/Auto_plots.R')
source('C:/Users/Cao/Documents/Github/Atlas-Research/Functions/KNN_Matching.R')
```

\newpage

\titleformat{\paragraph}{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}

\titlespacing{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\setcounter{secnumdepth}{5}

\setcounter{tocdepth}{5}

\tableofcontents

\newpage

# Mathematical Definition of Employability

## Initial Insights

### Probability of Finding a Job

Employability, as the word itself indicates, is *the ability to find a job*. This is very obvious, indeed, but it bears mentioning in order to quantify the concept properly. From this tautological notion, then, we could define, in mathematical terms, that employability is not exactly the *ability* to find a job, but rather the *probability* of being employed, given a particular set of professional attributes. That is, if we measure professional attributes on a scale, say, of 0 to 100, calling each attribute $a_i^u$ the $i$-th attribute of person $u$, such that $a_i^u \in [0,100] \ \forall \ i,u$, then it follows that employability is:

$$
\Lambda(\vb{a_u}) = \Pr(l=1 \ |\ \vb{a_u}),
$$

where $\vb{a_u}=(a_1^u,...,a_m^u)$ is the vector of professional attributes $a_i^u$ that characterizes person $u$, and $l \in \{0,1\}$ is a dummy variable denoting whether the individual is employed or not.

Now, suppose every individual employed in an occupation $q$ are characterized by the very same $\vb{a_q}=(a_1^q,...,a_m^q)$ vector of professional attributes. Additionally, suppose we know the $n_q \geq 0$ employment level of this occupation, and the total labor force $\mathrm{N}=\sum_j{n_j}$. With this, it is then straightforward to estimate the probability $\Lambda(\vb{a_q})$ defined above as:

$$
\begin{gathered}
\Lambda(\vb{a_q},n_q,\mathrm{N}) =
\Pr(l=1 \ |\ \vb{a_q}) 
\\ = \Pr(l=1 \ | \ n_q,\mathrm{N})
\\ = \frac{n_q}{\mathrm{N}}
\end{gathered}
$$

In other words, the employability of occupation $q$ is the probability of any person in the total work force $\mathrm{N}$ being one of the $n_q$ people employed in that occupation. Pretty simple.

However, this formulation fails to be an adequate employability metric for two main reasons. The first is that it yields values too small to be easily interpretable. Since any given occupation is but a really tiny fraction of the total labor market, $\Lambda$ values calculated this way are proportionally small. The second problem is a more interesting one, and will be treated in the following section.

### Adjusting for Professional Similarity

The second problem with this initial formulation of an employability coefficient is that people can find jobs in many different fields, provided they are sufficiently qualified. In other words, if an individual is employed in occupation $q$ and occupation $q$ is very similar to another occupation $\tilde{q}$, this individual could also find employment as a $\tilde{q}$. Thus, their employability coefficient would need to account for the probability of them being employed either as $q$ or $\tilde{q}$ --- again, supposing they are sufficiently qualified.

Mathematically, if occupations $q$ and $\tilde{q}$ are said to be similar, then the probability of a person with a professional profile identical with $q$ finding a job either as $q$ or $\tilde{q}$ could be intuitively written as the probability of two mutually exclusive events, adjusted by the probability of two other independent events, namely: the probability of finding a job as a $q$ or a $\tilde{q}$, adjusted by the probability of being *recognized* by the labor market as either one of these occupations to begin with.

The first part of this solution has to do with the amount of job posts available for each occupation, and it was already explained above. The second part has to do with professional similarity, as an occupation is recognized by the labor market as identical to another to the degree it has at least the minimum competency level in the required skills. Hence, we may define a measure of the probability of having sufficient professional overlap:

$$\begin{gathered}
\mathrm{I(\vb{a_j},\vb{a_k})} = \Pr(j \approx k \ | \ \vb{a_j},\vb{a_k})= \Pr(\vb{a_j} \geq \vb{a_k} \ | \ \vb{a_j},\vb{a_k})= \frac{\sum_{i=1}^{m}{g(a_{ji},a_{ki})}}{m},\\ g(a_{ji},a_{ki}) =\begin{cases}1, \text{ if } a_{ji} \geq a_{ki}.\\0, \text{ otherwise}.\end{cases}\end{gathered}$$

$$
\begin{gathered}\mathrm{I(\vb{a_j},\vb{a_k})}= \Pr(j \approx k \ | \ \vb{a_j},\vb{a_k})= \Pr(\vb{a_j} \geq \vb{a_k} \ | \ \vb{a_j},\vb{a_k})= \sum_{i=1}^{m}{\alpha_{i}^kg(a_{i}^j,a_{i}^k)}, \\ g(a_{i}^j,a_{i}^k) =\begin{cases}1, \text{ if } a_{i}^j \geq a_{i}^k.\\0, \text{ otherwise}.\end{cases},\\ \alpha_i^k = {\frac{a_i^k}{\sum_{i=1}^{m}{a_i^k}}} \implies \sum_{i=1}^{m}\alpha_{i}^k = 1\end{gathered}
$$\
\
The coefficient above refers to the interchangeability of occupations, and can be defined as the similarity between them, or any increasing function of it. Its interpretation is as follows: if employers are interested in a particular subset of professional attributes, which can be attained by any person, regardless of their career path, then the probability of a person having the desired competencies is the overlap between their own competencies and those of a specific occupation, or professional profile, displaying these competencies to the desired degree; or, alternatively, the probability of two professional profiles being interchangeable is the percentage of overlap between them.

The reasoning behind this apparently hasty conclusion is simple: all the job activities of an occupation require of individuals a particular set of skills, which is quantified by their professional profile. If a person has all these competencies, then the probability of being unable to perform a given task on the job is, *ceteris paribus*, precisely zero. But, conversely, if they lack any of the traits required to perform these tasks, then the probability they are unable to perform them properly increases by the exact measure of their under-qualification. Thus, the interchangeability of professional profiles is proportional to their similarity.

Another way of thinking about this concept would be to pose that some --- if not most --- of the jobs generally associated with a given career path do not actually require its entire set of skills, but only a fraction of it; so that any "sufficiently qualified" job applicant could be hired to perform such jobs. Yet another way of thinking about the interchangeability coefficient is to conjecture employers may be willing to hire under-qualified personnel, probably by less than their more qualified counterparts, and allow their skill set to develop on the job, and/or provide training themselves. In this sense, the interchangeability coefficient (i.e. the probability of being recognized by recruiters as "sufficiently qualified")

A principal ideia do coeficiente de intercambialidade é que nem todos os empregos de uma profissão requerem 100% das competências, ou alternadamente, nem todos os empregadores requerem que você já esteja 100% pronto, permitindo portanto que desenvolva-se no trabalho, ou ainda que uma parcela das funções de determinado trabalho pode ser terceirizada a pessoas que não têm 100% das competências profissões requeridas, enquanto a parte mais importante do trabalho fica para as pessoas que têm essas competências. Basicamente, estamos dividindo o tempo entre pessoas.

Ou ainda que os empregos em si podem ser uma mistura desses perfis profissionais canônicos, de modo que as profissões mesmo não existam, apenas uma série de N empregos que requerem diferentes parcelas de cada profissão.

Having understood this, at last we can estimate the probability of finding a job as either $q$ or $\tilde{q}$, adjusted by the similarity between these occupations:

$$
\begin{gathered}\Lambda(\vb{a_q}, \vb{a_{\tilde{q}}}, n_q, n_{\tilde{q}}, \mathrm{N}) =
\Pr(l=1 \ | \ \vb{a_q})\\ = \Pr(q \approx q \ | \ \vb{a_q},\vb{a_q}) \Pr(l=1 \ | \ n_q,\mathrm{N}) +\Pr(q \approx {\tilde{q}} \ | \ \vb{a_q},\vb{a_{\tilde{q}}}) \Pr(l=1 \ | \ n_{\tilde{q}},\mathrm{N})\\ = \mathrm{I(\vb{a_q},\vb{a_q})} \Pr(l=1 \ | \ n_q,\mathrm{N}) +\mathrm{I(\vb{a_q},\vb{a_{\tilde{q}}})} \Pr(l=1 \ | \ n_{\tilde{q}},\mathrm{N})\\ = s(\vb{a_q},\vb{a_q}) \Pr(l=1 \ | \ n_q,\mathrm{N}) + s(\vb{a_q},\vb{a_{\tilde{q}}}) \Pr(l=1 \ | \ n_{\tilde{q}},\mathrm{N})\\ = 1 \times \left( \frac{n_q}{\mathrm{N}} \right) + s(\vb{a_q},\vb{a_{\tilde{q}}}) \times \left( \frac{n_{\tilde{q}}}{\mathrm{N}} \right) \\ = \frac{n_q + s(\vb{a_q},\vb{a_{\tilde{q}}}) n_{\tilde{q}}}{\mathrm{N}}\end{gathered}
$$

Put simply, to the exact measure that occupations $q$ and $\tilde{q}$ are interchangeable, employment opportunities for either occupation should include the other: as their professional attributes overlap, so too their employment opportunities also overlap. In fact, we could say people with professional profiles $\vb{a_q}$ and $\vb{a_{\tilde{q}}}$ compete for the same $n_q + n_{\tilde{q}}$ job posts.

In this sense, we notice, for example, that occupations which are completely dissimilar have no employment overlap, as

$$
s(\vb{a_q},\vb{a_{\tilde{q}}}) = 0 
\implies 
\Lambda(\vb{a_q},\vb{a_{\tilde{q}}},n_q,n_{\tilde{q}},\mathrm{N}) =
 \frac{n_q + 0 \times n_{\tilde{q}}}{\mathrm{N}}
= \frac{n_q}{\mathrm{N}},
$$

and, on the other hand, that completely similar occupations have a complete overlap of employment opportunities as well:$$ 
s(\vb{a_q},\vb{a_{\tilde{q}}}) = 1  \implies  \Lambda(\vb{a_q},\vb{a_{\tilde{q}}},n_q,n_{\tilde{q}},\mathrm{N}) =  \frac{n_q + 1 \times n_{\tilde{q}}}{\mathrm{N}} = \frac{n_q + n_{\tilde{q}}}{\mathrm{N}}  
$$

This said, it is important to note that this so-called "overlap" of employment opportunities in no way implies the total work force actually increases beyond $\mathrm{N}$, since $\mathrm{N}$ is calculated by summing up the $n_j$ *workers* employed in each occupation, not the total amount of *people* in the work force. That is, if a person chooses to work another job, they are counted as a separate worker in that particular occupation. Thus, $\mathrm{N}$ already accounts for people with multiple careers. This is important because, otherwise, we would need to adjust the denominator in this mathematical formulation, and in doing so we could fall into the first problem mentioned above (viz. coefficients of employability being too small).

The employability coefficient, therefore, only indicates which percentage of the $\mathrm{N}$ available jobs would be *suitable* to a given person, adjusting for their similarity with each occupation. It does not mean that said person in fact ends up working at the associated jobs, nor that the total amount of available job posts increases simply because workers could be employed elsewhere. Put another way, while employment opportunities do overlap, actual employment does not.

For example, Economists, Accountants, Executives, and Actuaries have a reasonably high professional similarity. And in practice, we do find these occupations competing for the same job posts. Engineers, and other STEM-related careers, likewise also have significant overlap in their employment opportunities. And the pattern repeats itself for every group of similar occupations. However, in any of these cases, no matter how many people are suitable for a given job post, only one of them is actually hired. So, despite the sum of overlapping employment opportunities being indeed much higher than available jobs, when each individual is finally employed, the total work force equals $\mathrm{N}$.

Thus, at least so far, this metric seems intuitive and consistent. Therefore, we can write a provisional generalization for any number of occupations:

$$\begin{gathered}
\Lambda(\vb{a_u}, \vb{A}, \vb{n}, \mathrm{N}) =\Pr(l=1 \ | \ \vb{a_u})\\ = \sum_{j}{\Pr(u \approx j)\Pr(l=1 \ | \ n_j, \mathrm{N})}\\ = \frac{\sum_{j}{\mathrm{I}(\vb{a_u},\vb{a_j})}n_j}{\mathrm{N}}\\ = \frac{\sum_{j}{s(\vb{a_u},\vb{a_j})}n_j}{\mathrm{N}},\end{gathered}
$$

where $\vb{A}$ is the matrix of all $\vb{a_j}$ professional profiles, and $\vb{n} = (n_1,...,n_j)$, the vector of job posts for the corresponding occupations, such that $\mathrm{N} = \sum_j{n_j}$.

## Additional Metrics

### Revised Interchangeability Coefficients

Now, even though this adjusted metric is much more adequate than the previous one, it still has some minor flaws. For instance, it isn't reasonable to assume linear behavior in the professional interchangeability coefficient. For assuming such a relationship would imply that occupations with small similarity to other occupations, say in the 0 to 30% range, could be seen by the labor market as "still somewhat similar", and thus compete for a fraction of available job posts equal to their similarity coefficients; while, in practice, job applicants with such small similarities would be immediately dismissed by HR recruiters.

Thus, a scaling factor should be applied to the interchangeability metric, in order to reduce the probability of being recognized as "similar" to a given occupation, specially in the smaller ranges of professional similarity. Again, as $s(\vb{a_j},\vb{a_k}) \in [0,1]\ \forall \ j,k$, a simple way of implementing this adjustment would be:

$$ \Pr(j \approx k \ | \ \vb{a_j},\vb{a_k}) = \mathrm{I(\vb{a_j},\vb{a_k})} = s(\vb{a_j},\vb{a_k})^{\alpha}, \ \alpha > 1$$

as $x^{\alpha} \leq x \ \forall \ \alpha > 1, \ x \in [0,1]$. However, this metric is also inadequate, as it can be "overly severe" in the higher ranges of similarity. A linear interpolation then is applied so as to smooth the transition between the adjusted equation above and the linear one already described:

$$
\Pr(j \approx k \ | \ \vb{a_j},\vb{a_k}) = \mathrm{I(\vb{a_j},\vb{a_k})} = s(\vb{a_j},\vb{a_k})s(\vb{a_j},\vb{a_k}) +
[1-s(\vb{a_j},\vb{a_k})] s(\vb{a_j},\vb{a_k})^{\alpha}, \ \alpha > 1
$$

And an additional adjustment could provide an even more realistic behavior to the interchangeability function:

$$
\Pr(j \approx k \ | \ \vb{a_j},\vb{a_k}) = \mathrm{I(\vb{a_j},\vb{a_k})} = s(\vb{a_j},\vb{a_k})s(\vb{a_j},\vb{a_k}) + [1-s(\vb{a_j},\vb{a_k})]s(\vb{a_j},\vb{a_k})^{{\left[ \frac{1}{s(\vb{a_j},\vb{a_k})} \right]} ^{\left[ \frac{1}{s(\vb{a_j},\vb{a_k})} \right]}}
$$

Here, the "severity" of the adjustment is entirely proportional to the similarity between occupations, and does not depend on arbitrarily set parameters. In either case, the more similarity approaches 1, the more interchangeability becomes linear.

Finally, these interchangeability metrics are illustrated in the diagram below:

```{r interchangeability.coefficients, fig.cap='Interchangeability Coefficients I--IV', out.width='100%', echo=FALSE, warning=FALSE, results='hide'}

seq(0,1,0.001) %>% 
  as_tibble() %>%
  rename(
    s = 1
  ) %>%
  mutate(
    Coef.I = s
    #, Coef.II = s ^ 2
    , Coef.II = s ^ 4
    #, Coef.III = s * s + (1 - s) * s ^ 2
    , Coef.III = s * s + (1 - s) * s ^ 4
    , Coef.IV = s * s + (1 - s) * s ^ ((1/s)^(1/s))
    #, Coef.IV = s * s + (1 - s) * s ^ ((1/s)^(4))
    #, Coef.V = s * s + (1 - s) * s ^ ((1/s)^(1/s)^(1/s))
  ) %>% 
  rename(
    similarity = s
  ) %>% 
  pivot_longer(
    cols = starts_with('Coef')
    , names_to = 'coefficient'
    , values_to = 'interchangeability'
  ) %>% 
  fun_plot.line(aes(
    x = similarity
    , y = interchangeability
    , color = coefficient
  )
  , .list_labs = list(
    x = 'Similarity'
    , y = 'Interchangeability'
    , color = 'Coefficient'
  )
  , .fun_format.x = percent
  , .fun_format.y = percent
  , .theme = 
    ggridges::theme_ridges() + 
    theme(
      legend.position = 'bottom'
      , axis.text.y = element_text(vjust = 0.5)
    )
  )
```

From this figure, we immediately conclude that coefficients of interchangeability III and IV exhibit a very natural behavior, allowing for some overlap between occupations, without being "too severe" or "too lenient" in their compensation. Therefore, these mathematical formulations appear to adequately express what we refereed to in the beginning of Section 1.2. as "sufficient qualification". However, it is evident that coefficient IV is indeed the most realistic of them all.

# Estimating Employability Coefficients

We now estimate the employability metrics developed above in three instances: for occupations; for professional attributes; and for any professional profile. In order to estimate the employability of occupations we need only apply the $\Lambda(\vb{a_j}, \vb{A}, \vb{n}, \mathrm{N})$ function for every $\vb{a_j}$ vector of already registered career competencies, utilizing one of the four $\mathrm{I}(\vb{a_j},\vb{a_k})$ interchangeability coefficients illustraded in Figure 1. The estimation of employability coefficients for individual professional attributes involves carrying out a linear regression of some sort (either OLS or NNLS). And, provided this model is reliable, we can proceed to calculate employability coefficients for any arbitrary $\vb{a_u}$ vector of professional attributes (i.e. a professional profile) by multiplying the model's parameters with individuals's attribute scores.

## For Occupations

dsds

## For Professional Attributes

P.S.: use $\lambda_i$ for the employability of the $i$-th attribute, since $\Lambda_u$ is the employability of professional profiles.

## For Any Professional Profile

dsds

# Professional Competitiveness

From the employability metrics previously developed, arises the question of career competitiveness, that is: "What is the level of competition for job posts in a given occupation?" Now, this question is two-fold, for as already stated, people may compete for jobs with people from other fields (e.g. Accountants with Economists, Executives, and Actuaries, etc), again, provided the labor market recognizes these applicants are "sufficiently qualified" (i.e. being interchangeable, as described above).

If we think about this problem, it is easy to see that while some job posts for an occupation are indeed too specialized to allow for *external* competition (i.e. applicants from other professional backgrounds), the other portion of jobs are suitable for any person with high enough professional similarity, as their overlapping competencies make them interchangeable to some degree, and therefore eligible to compete for a fraction of available job posts outside their fields of expertise.

Mathematically, we can say that a portion of job posts are subject only to *internal* competition, with applicants completely interchangeable with the "canonical" or even "platonic" representation of a particular occupation's professional profile $\vb{a_q}$, and the remaining jobs are subject to *external* competition with any $k$ occupation to the $\mathrm{I}(s(\vb{a_q},\vb{a_k}))$ degree of professional interchangeability. More precisely, the portion of these jobs (viz. those subject to external competition), is the maximum value of interchangeability with an occupation, since every job applicant said to be interchangeable with this occupation is eligible to compete for job posts below this maximum interchangeability level, above which only "canonical" (i.e. perfectly interchangeable) job applicants compete for jobs.

$$
\begin{gathered}
c_q^e(\vb{a_q},\vb{a_k}) = \max \mathrm{I}(s(\vb{a_q},\vb{a_k})), \ \forall \ k\\ c_q^\iota(c_q^e) = 1 - c_q^e
\end{gathered}
$$

These two equations describe, respectively, the total percentage of jobs subject to external competition, and internal competition. Again, as applicants from other professional backgrounds are only eligible to the same "not too specialized", or "non canonical", portion of job posts for a given occupation, they can *at most* compete for the same $c_q^e$ jobs equal to the maximum interchangeability level for that occupation.

Of course, this is an oversimplification, and we'll develop a more sophisticated model at the end of this Section. It is evident, for example, that not every single applicant is in fact eligible to the full $c_q^e$ portion of "non canonical" job posts, but rather a more restricted $c_q^e(\vb{a_q},\vb{a_j}) \leq c_q^e(\vb{a_q},\vb{a_k})$ portion. In other words, job applicants from other fields overlap with each other from the smallest degree of interchangeability to the highest $c_q^e(\vb{a_q},\vb{a_k}) = \max \mathrm{I}(s(\vb{a_q},\vb{a_k})), \ \forall \ k$, so that inter-occupation competitiveness progressively decreases as interchangeability increases. Put simply, the more a particular job resembles the "canonical" representation of an occupation, the less it is subject to external competition. So, the more competitive jobs are the less specialized ones (i.e. those that could be performed by any untrained person).

Furthermore, professional competitiveness is also a function of the number of eligible applicants. Thus, different quantities of applicants compete for each of these $c_q^e$ and $c_q^\iota$ portions of a $n_q$ subset of the labor market. That is, while jobs subject to internal competition can only be performed by $c_q^\iota n_q$ people, the remaining $c_q^e$ jobs can attract any number of applicants from other fields, so that each of these interchangeable occupations can bring up to $\mathrm{I}(\vb{a_q},\vb{a_j})n_j$ people to compete for those job posts.
